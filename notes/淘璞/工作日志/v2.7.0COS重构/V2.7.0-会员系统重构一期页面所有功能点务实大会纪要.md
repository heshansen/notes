# V2.7.0-会员系统重构一期页面所有功能点务实大会纪要

### 时间与参会人员

* 时间：2月7号下午和2月8号上午
* 参会人员：贺汕森、周雨、孙小东、王港龙；刘兵、胡春、王佳；王庆、孙晓圆；黄超、王展锐。

### 主要内容

* 会员系统重构一期页面所有功能点，包含后台服务接口和前端交互效果细节。

### 注意事项汇总

##### 后端开发注意事项：

* **贺汕森--订单服务与支付服务**
* 1、商品详情页：购物车按钮(含页底快速入口处)，查询购物车列表不带特殊条件，除需要验证登录外和老系统保持一致。
* 2、购物车页：购物车清除按钮不是全部清空，只是批量删除商品；
* 3、购物车页和结算页：各门店不展示促销信息，只在最终金额中统一计算；
* 4、商品详情页：互斥商品(配送方式互斥)，在加入购物车时进行判断，不在结算时处理；
* 5、结算页和订单详情页：特殊商品（门票、预约、定制类）展示需要特殊处理。
* 6、结算页：增加订单优惠券叠加使用规则接口；重点关注。
* 7、选择支付页和支付成功页：订单中只有一家门店时，显示门店名称，否则不显示。
* 8、登录页：用户首次注册登录时，需保存默认昵称。
* 9、订单列表页：已支付取消订单有两种展现方式，全部订单页，按门店展示；退货/售后页，按商品一一呈现，目测需要提供两个列表接口；
* 10、退货商品列表页：是查询当前子订单所有商品，而不是主订单。
* 11、申请退货页：图片上传采用新的七牛云存储方式，以前的数据可以全部舍弃，呈现的地方也需要改成七牛云的方式。

* **王港龙--报名活动服务、生态圈服务、资源服务**
* 活动列表页：报名活动修改时间进入待审核状态时，在C端的我的报名活活动详情查看和签到时，需忽略“报名活动待审核”状态的限定。
* 登录页：会员注册时，会员昵称需给一个默认的值“淘璞会员”。

* **周雨--商品服务、促销服务、商户服务**
* 搜索:搜索一期只做商品和门店Tab切换时再发请求
* 搜索:匹配的逻辑参考原型，但最终的范围要看ES的具体实现。
* 搜索:搜索结果页的门店筛选包括：所有三级种类&&所有品牌；商品筛选包括：所有三级种类&&性别和年龄（待定，不一定能实现，如果实现还要做埋点）&&价格区间&&所有品牌
* 分类:分类列表页的搜索就是全局搜索
* 分类:分类列表页和搜索页逻辑不同：只展示该三级分类中的门店或商品，默认该三级分类下的所有品牌
* 分类:分类列表页的门店筛选包括：该三级分类(点击进入的，选中)&&该三级分类中的品牌；商品筛选包括：该三级分类&&性别和年龄（待定，不一定能实现）&&价格区间&&该三级分类中的品牌
* 门店列表页:有一级分类的切换，筛选和全局搜索的门店筛选项一致：所有三级种类&&所有品牌
* 商品详情页:商品图片有仅支持快递/自提字体提示
* 商品详情页:价格只展示两个，SKU默认不选中，其中的淘璞价需要范围/XX起（确定淘璞帮是否需要一致）
* 商品详情页:门店列表不变，促销信息和优惠券领取一期不展示
* 购物车页:调用商品信息的接口需返回商品配送类型：自提/快递/皆可
* 结算页:优惠券的叠加规则和选取，门店维度的订单详情中不展示该门店的优惠券抵扣，只在汇总处显示
* 我的赠品页:已兑换的赠品可以查看快递地址信息（待发货）/已发货信息（已发货）
* 快递赠品地址问题参考报名活动，从源头解决

* **孙小东--会员服务与公共服务**
* 登录：1.图形验证码
* 搜索：2.历史搜索记录存储(商品，门店，定位信息会员未登录不保存)
* 首页：3.亲子购物（后端配置），亲子活动暂时前端固定内容
* 我的：4.会员信息本次仅展示不做修改（头像显示固定图片，信息只显示昵称，昵称未维护的会员统一更新数据库字段内容为“淘璞会员”）
* 我的地址：5.会员地址区域查询，调用后端接口或前端调插件
* 我的赠品：6.快递地址维护查询

* **孙晓圆**：以下是我记录的，可能要后期实现时需要商议的部分方案
* 定位相关方案设计（前端）
* 图片迁移方案 （后端）
* 数据“埋”点方案（数据搜索时收集搜索记录）
* 商品分享（前端）
* 购物车实现、下单中的 订单拆分、优惠券使用方案（前后端）

##### 前端开发注意事项：

* **刘兵**
* 搜索：最近搜索登录后才展示
* 搜索：缓存解决方案
* 定位与搜索：定位搜索点击搜索后隐藏搜索按钮
* 支付成功页：门店数量大于1则不显示门店信息,返回时则返回订单列表
* 自提码页：websocket替代轮循方案
* 申请退货页：使用七牛上传图片
* 报名活动表单-全部填写则按钮可点击状态，点击按钮做表单校验并toast提示用户

* **王佳**：
* 我的页面：头像、昵称为默认，不可修改，从数据库中获取。
* 设置页：头像、昵称不可修改，地址可点击进入地址列表页修改。
* 我的地址：所在地区三级联动。
* 我的积分：积分规则内容为写死的内容。
* 我的赠品：1.赠品说明为可配置数据，从后台获取；
* 我的赠品：2.已兑换赠品列表，点击“待发货”“已发货”按钮，弹框显示具体信息；
* 我的赠品：3.地址填写的表单验证；
* 我的赠品：4.考虑弹框中必填字段过多时的显示问题；
* 订单页：1.门店订单点击去付款时，应有弹框提示；
* 订单页：2.待自提订单列表：提货码弹框和支付成功页的弹框样式相同；
* 订单页：* 待支付订单详情页：门店订单点击去付款时，应有弹框提示。
* 申请退货页：1.退货商品列表页显示的是当前订单中的商品；
* 申请退货页：2.图片上传使用七牛；
* 其他状态订单详情页：“删除订单”按钮保留。
* 退款/售后订单详情页：商家审核同意/退款完成状态时，显示退回的地址。

* **胡春**：
* 搜索：1、 最近搜索如果未登录则为空；
* 搜索：2、 搜索后优先展示有结果的，默认是展示门店
* 搜索：3、 门店首页的搜索的商品限制在门店范围内
* 分类列表：1、 默认是展示商品
* 分类列表：2、 筛选距离暂时不做，种类显示一个（分类列表里的），品牌默认全部
* 分类列表：3、 点击分类列表页的搜索input框，进入全局搜索
* 分类列表：4、 筛选里的年龄、价格改为input
* 商品详情页：1、 优惠券、促销暂时不做
* 商品详情页：2、 购物车注意互斥
* 结算页：1、“我要快递”样式改为开关样式